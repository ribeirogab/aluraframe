(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='app/dist',b(b.s=11)})([function(a,b,c){'use strict';function d(a){return a instanceof f||Object.getPrototypeOf(a)instanceof f}c.d(b,'a',function(){return e}),b.b=function(a){return d(a)?a.message:(console.error(a),'Could not perform the operation!')};let e=class extends Error{constructor(a=''){super(a),this.name=this.constructor.name}};const f=e},function(a,b,c){'use strict';c.d(b,'a',function(){return e});var d=c(4);let e=class{constructor(a=d.f('date'),b=d.f('amount'),c=d.f('value')){this._date=new Date(a.getTime()),Object.assign(this,{_amount:b,_value:c}),Object.freeze(this)}get volume(){return this._amount*this._value}get date(){return new Date(this._date.getTime())}get amount(){return this._amount}get value(){return this._value}equals(a){return JSON.stringify(this)===JSON.stringify(a)}}},function(a,b,c){'use strict';c.d(b,'a',function(){return d});let d=class{constructor(a){this._selector=a}template(){throw new Error('This method needs to be overwritten')}update(a){this._selector.innerHTML=this.template(a)}}},function(a,b,c){'use strict';function d(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,('value'in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}b.a=function(){return o};var f,g,h,i,j,k=c(12),l=c(21),m=c(4);let n=(f=m.b('#data','#quantidade','#valor'),g=m.c(250),h=m.c(1e3),f(i=(j=class{constructor(a,b,c){this._inputDate=a,this._inputAmount=b,this._inputValue=c;const d=document.querySelector.bind(document);this._tradeList=new m.a(new k.b(),new l.d(d('#tradesView')),'add','delete','import','order','reverse'),this._message=new m.a(new l.b(),new l.c(d('#messageView')),'text'),this._service=new k.c,this._currentOrder='',this._init()}_init(){var a=this;return d(function*(){try{const b=yield m.e(),c=yield b.listAll();c.forEach(function(b){a._tradeList.add(b)})}catch(b){a._message.text=m.d(b)}})()}add(a){var b=this;return d(function*(){try{a.preventDefault();const c=yield m.e();yield c.add(b._createTrade()),b._tradeList.add(b._createTrade()),b._message.text='Trades successfully added!',b._resetForm(),console.log(b._tradeList)}catch(a){b._message.text=m.d(a)}})()}delete(){var a=this;return d(function*(){try{const b=yield m.e();yield b.deleteAll(),a._tradeList.delete(),a._message.text='Successfully deleted!'}catch(b){a._message.text=m.d(b)}})()}import(){var a=this;return d(function*(){try{const b=yield Promise.all([a._service.import('semana'),a._service.import('anterior'),a._service.import('retrasada')]);b.reduce(function(a,b){return a.concat(b)},[]).filter(function(b){return!a._tradeList.list.some(function(a){return b.equals(a)})}).map(function(b){return a._tradeList.add(b)}),a._message.text='Trades imported successfully'}catch(b){a._message.text=m.d(b)}})()}order(c){this._currentOrder===c?this._tradeList.reverse():this._tradeList.order((d,a)=>d[c]-a[c]),this._currentOrder=c}_createTrade(){return new k.a(l.a.textToDate(this._inputDate.value),parseInt(this._inputAmount.value),parseFloat(this._inputValue.value))}_resetForm(){this._inputDate.value='16/09/2000',this._inputAmount.value=7,this._inputValue.value=5,this._inputDate.focus()}},e(j.prototype,'add',[g],Object.getOwnPropertyDescriptor(j.prototype,'add'),j.prototype),e(j.prototype,'import',[h],Object.getOwnPropertyDescriptor(j.prototype,'import'),j.prototype),j))||i);const o=new n},function(a,b,c){'use strict';var d=c(0);c.d(b,'d',function(){return d.b});var e=c(13);c.d(b,'a',function(){return e.a});var f=c(6),g=c(14);c.d(b,'e',function(){return g.a});var h=c(15),i=c(8),j=c(5),k=c(16);c.d(b,'f',function(){return k.a});var l=c(17);c.d(b,'c',function(){return l.a});var m=c(18);c.d(b,'b',function(){return m.a})},function(a,b,c){'use strict';c.d(b,'a',function(){return d});let d=class{static create(a,b,c){return new Proxy(a,{get(a,d){return b.includes(d)&&typeof a[d]==typeof Function?function(){console.log(`"${d}" shot the trap`),Reflect.apply(a[d],a,arguments),c(a)}:Reflect.get(a,d)},set(a,d,e,f){return b.includes(d)&&(console.log(`"${d}" shot the trap`),Reflect.set(a,d,e),c(a)),Reflect.set(a,d,e,f)}})}}},function(a,b,c){'use strict';c.d(b,'a',function(){return g});let d=null;const e=['trades'];let f=null,g=class a{constructor(){throw new Error('This class cannot be instantiated!')}static getConnection(){return new Promise((b,c)=>{const e=indexedDB.open('jscangaceiro',1);return d?b(d):void(e.onupgradeneeded=(b)=>{a._createStores(b.target.result)},e.onsuccess=(a)=>{d=a.target.result,f=d.close.bind(d),d.close=()=>{throw new Error('You cannot directly close this connection!')},b(a.target.result)},e.onerror=(a)=>{console.log(a.target.error),c(a.target.error.name)})})}static _createStores(a){e.forEach((b)=>{a.objectStoreNames.contains(b)&&a.deleteObjectStore(b),a.createObjectStore(b,{autoIncrement:!0})})}static closeConnection(){d&&f()}}},function(a,b,c){'use strict';c.d(b,'a',function(){return e});var d=c(1);let e=class{constructor(a){this._connection=a,this._store='trades'}add(a){return new Promise((b,c)=>{const d=this._connection.transaction([this._store],'readwrite').objectStore(this._store).add(a);d.onsuccess=()=>b(),d.onerror=(a)=>{console.log(a.target.error),c(a.target.error.name)}})}deleteAll(){return new Promise((a,b)=>{const c=this._connection.transaction([this._store],'readwrite').objectStore(this._store).clear();c.onsuccess=()=>a(),c.onerror=(a)=>{b(a.target.error)}})}listAll(){return new Promise((a,b)=>{const c=[],e=this._connection.transaction([this._store],'readwrite').objectStore(this._store).openCursor();e.onsuccess=(b)=>{const e=b.target.result;e?(c.push(new d.a(e.value._date,e.value._amount,e.value._value)),e.continue()):a(c)},e.onerror=(a)=>{console.log(a.target.error),b(a.target.error.name)}})}}},function(a,b,c){'use strict';function d(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}c.d(b,'a',function(){return e});let e=class{get(a){var b=this;return d(function*(){const c=yield b._handleErrors((yield fetch(a)));return c.json()})()}post(a,b){var c=this;return d(function*(){const d=yield fetch(a,{headers:{"Content-type":'application/json'},method:'post',body:JSON.stringify(b)});return yield c._handleErrors(d)})()}_handleErrors(a){return d(function*(){if(!a.ok)throw new Error(a.statusText);return a})()}}},function(a,b,c){'use strict';c.d(b,'a',function(){return e});var d=c(10);let e=class{static textToDate(a){if(!/\d{2}\/\d{2}\/\d{4}$/.test(a))throw new d.a;return new Date(a.split('/').reverse())}static dateToText(a){return`${a.getDate()}/${a.getMonth()+1}/${a.getFullYear()}`}}},function(a,b,c){'use strict';c.d(b,'a',function(){return e});var d=c(0);let e=class extends d.a{constructor(){super('This date is not in DD-MM-YYYY format')}}},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(3),e=c(25),f=c.n(e),g=c(26),h=c.n(g),i=c(27),j=c.n(i),k=c(28),l=c.n(k);const m=d.a();document.querySelector('.form').addEventListener('submit',m.add.bind(m)),document.querySelector('#btnDelete').addEventListener('click',m.delete.bind(m)),document.querySelector('#btnImport').addEventListener('click',m.import.bind(m))},function(a,b,c){'use strict';var d=c(1);c.d(b,'a',function(){return d.a});var e=c(7),f=c(19);c.d(b,'b',function(){return f.a});var g=c(20);c.d(b,'c',function(){return g.a})},function(a,b,c){'use strict';c.d(b,'a',function(){return e});var d=c(5);let e=class{constructor(a,b,...c){const e=d.a.create(a,c,(a)=>b.update(a));return b.update(a),e}}},function(a,b,c){'use strict';function d(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}c.d(b,'a',function(){return g});var e=c(6),f=c(7);let g=(()=>{var a=d(function*(){const a=yield e.a.getConnection();return new f.a(a)});return function(){return a.apply(this,arguments)}})()},function(a,b,c){'use strict';var d=c(0);(class extends d.a{constructor(){super('http Error')}})},function(a,b){'use strict';b.a=function(a){throw new Error(`${a} is a required param!`)}},function(a,b){'use strict';b.a=function(a=500){return(b,c,d)=>{const e=d.value;let f=0;return d.value=function(...b){event&&event.preventDefault(),clearTimeout(f),f=setTimeout(()=>e.apply(this,b),a)},d}}},function(a,b){'use strict';b.a=function(...a){const b=a.map((a)=>document.querySelector(a));return function(a){const c=a,d=function(){return new c(...b)};return d.prototype=c.prototype,d}}},function(a,b,c){'use strict';c.d(b,'a',function(){return d});let d=class{constructor(){this._list=[],Object.freeze(this)}get list(){return[].concat(this._list)}get totalVolume(){return this._list.reduce((a,b)=>a+b.volume,0)}add(a){this._list.push(a)}delete(){this._list.length=0}order(a){this._list.sort(a)}reverse(){this._list.reverse()}}},function(a,b,c){'use strict';c.d(b,'a',function(){return g});var d=c(8),e=c(1),f=c(0);let g=class{constructor(){this._http=new d.a}import(a){return this._http.get(`http://localhost:3000/negociacoes/${a}`).then((a)=>{return a.map((a)=>new e.a(new Date(a.data),a.quantidade,a.valor))}).catch((b)=>{console.log(b),new f.a(`N foi possivel obter as negociacoes da semana${-1===('semana'===a)?` ${a}`:''}.`)})}}},function(a,b,c){'use strict';var d=c(22);c.d(b,'c',function(){return d.a});var e=c(23);c.d(b,'d',function(){return e.a});var f=c(2),g=c(24);c.d(b,'b',function(){return g.a});var h=c(9);c.d(b,'a',function(){return h.a});c(10)},function(a,b,c){'use strict';c.d(b,'a',function(){return e});var d=c(2);let e=class extends d.a{template(a){return a.text?`<p class="alert alert-info">${a.text}</p>`:'<p></p>'}}},function(a,b,c){'use strict';c.d(b,'a',function(){return g});var d=c(2),e=c(9),f=c(3);let g=class extends d.a{constructor(a){super(a),a.addEventListener('click',(a)=>{'TH'===a.target.nodeName&&f.a().order(a.target.textContent.toLowerCase())})}template(a){return`
    <table class="table table-hover table-bordered">
        <thead>
            <tr>
                <th>DATA</th>
                <th>QUANTIDADE</th>
                <th>VALOR</th>
                <th>VOLUME</th>
            </tr>
        </thead>
    
        <tbody>
            ${a.list.map((a)=>`<tr>
                <td>${e.a.dateToText(a.date)}</td>
                <td>${a.amount}</td>
                <td>${a.value}</td>
                <td>${a.volume}</td>
              </tr>`).join('')}
        </tbody>
    
        <tfoot>
            <td colspan=3></td>
            <td>
                ${a.totalVolume}
            </td>
        </tfoot>
    </table>
    `}}},function(a,b,c){'use strict';c.d(b,'a',function(){return d});let d=class{constructor(a=''){this._text=a}get text(){return this._text}set text(a){this._text=a}}},function(){},function(){},function(){+function(a){'use strict';function b(b,d){return this.each(function(){var e=a(this),f=e.data('bs.modal'),g=a.extend({},c.DEFAULTS,e.data(),'object'==typeof b&&b);f||e.data('bs.modal',f=new c(this,g)),'string'==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find('.modal-dialog'),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find('.modal-content').load(this.options.remote,a.proxy(function(){this.$element.trigger('loaded.bs.modal')},this))};c.VERSION='3.3.7',c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,f=a.Event('show.bs.modal',{relatedTarget:b});this.$element.trigger(f);this.isShown||f.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass('modal-open'),this.escape(),this.resize(),this.$element.on('click.dismiss.bs.modal','[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on('mousedown.dismiss.bs.modal',function(){d.$element.one('mouseup.dismiss.bs.modal',function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var f=a.support.transition&&d.$element.hasClass('fade');d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),f&&d.$element[0].offsetWidth,d.$element.addClass('in'),d.enforceFocus();var g=a.Event('shown.bs.modal',{relatedTarget:b});f?d.$dialog.one('bsTransitionEnd',function(){d.$element.trigger('focus').trigger(g)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger('focus').trigger(g)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event('hide.bs.modal'),this.$element.trigger(b);!this.isShown||b.isDefaultPrevented()||(this.isShown=!1,this.escape(),this.resize(),a(document).off('focusin.bs.modal'),this.$element.removeClass('in').off('click.dismiss.bs.modal').off('mouseup.dismiss.bs.modal'),this.$dialog.off('mousedown.dismiss.bs.modal'),a.support.transition&&this.$element.hasClass('fade')?this.$element.one('bsTransitionEnd',a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off('focusin.bs.modal').on('focusin.bs.modal',a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger('focus')},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on('keydown.dismiss.bs.modal',a.proxy(function(a){27==a.which&&this.hide()},this)):!this.isShown&&this.$element.off('keydown.dismiss.bs.modal')},c.prototype.resize=function(){this.isShown?a(window).on('resize.bs.modal',a.proxy(this.handleUpdate,this)):a(window).off('resize.bs.modal')},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass('modal-open'),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger('hidden.bs.modal')})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass('fade')?'fade':'';if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement('div')).addClass('modal-backdrop '+e).appendTo(this.$body),this.$element.on('click.dismiss.bs.modal',a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target!==a.currentTarget||('static'==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass('in'),!b)return;f?this.$backdrop.one('bsTransitionEnd',b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass('in');var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass('fade')?this.$backdrop.one('bsTransitionEnd',g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:'',paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:''})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:'',paddingRight:''})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css('padding-right')||0,10);this.originalBodyPad=document.body.style.paddingRight||'',this.bodyIsOverflowing&&this.$body.css('padding-right',a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css('padding-right',this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement('div');a.className='modal-scrollbar-measure',this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on('click.bs.modal.data-api','[data-toggle="modal"]',function(c){var d=a(this),e=d.attr('href'),f=a(d.attr('data-target')||e&&e.replace(/.*(?=#[^\s]+$)/,'')),g=f.data('bs.modal')?'toggle':a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is('a')&&c.preventDefault(),f.one('show.bs.modal',function(a){a.isDefaultPrevented()||f.one('hidden.bs.modal',function(){d.is(':visible')&&d.trigger('focus')})}),b.call(f,g,this)})}(jQuery)},function(){}]);